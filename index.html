<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banana Studio | AI Image Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- NAVEGA√á√ÉO SUPERIOR -->
    <nav class="top-nav">
        <div style="font-size: 20px; font-weight: 700; margin-right: 20px;">üçå</div>
        <button class="nav-tab active" id="tab-studio-btn" onclick="switchTab('studio')">üé® STUDIO</button>
        <button class="nav-tab" id="tab-hero-btn" onclick="switchTab('hero')">‚ö° HERO PRO <span style="font-size: 8px; vertical-align: top; background: var(--accent-blue); padding: 2px 4px; border-radius: 4px; margin-left: 4px;">v1.4</span></button>
        <button class="nav-tab" id="tab-batch-btn" onclick="switchTab('batch')">üì¶ LOTE</button>
    </nav>

    <!-- ABA STUDIO -->
    <div id="studio-tab" class="tab-page active">
        <div class="sidebar">
            <div class="section-title">Presets</div>
            <div class="input-group">
                <select id="saved-prompts-select"><option value="">‚úçÔ∏è Digitar Novo</option></select>
            </div>
            <div class="section-title">Cria√ß√£o</div>
            <div class="input-group">
                <label>Prompt</label>
                <textarea id="prompt-input" rows="5" placeholder="Descreva sua vis√£o..."></textarea>
            </div>
            <div class="input-group" style="display:flex; flex-direction:column; gap:8px; margin-bottom: 20px;">
                <button class="btn-save" id="open-save-modal" style="width:100%; margin-top:0;">üíæ SALVAR NOVO</button>
                <button class="btn-save" id="open-manage-modal" style="width:100%; margin-top:0; background:var(--bg-card); border:1px solid var(--border-color); font-size: 11px;">‚öôÔ∏è GERENCIAR LISTA</button>
            </div>
            <div class="section-title">2. Refer√™ncias Visuais</div>
            <div class="ref-actions">
                <button class="btn-ref" id="ref-upload-btn">üì§ UPLOAD</button>
                <button class="btn-ref" id="ref-paste-btn">üìã COLAR</button>
                <button class="btn-ref" id="ref-clear-btn">üóëÔ∏è LIMPAR</button>
                <input type="file" id="ref-file-input" style="display:none;" accept="image/*" multiple>
            </div>
            <div class="ref-carousel-container"><div class="ref-carousel" id="ref-carousel"></div></div>
            <div class="input-group">
                <label>Modelo AI</label>
                <select id="model-select">
                    <option value="gemini-3.1-flash-image-preview" selected>‚ö° Gemini 3.1 Flash</option>
                    <option value="gemini-3-pro-image-preview">üì∏ Gemini 3 Pro (Image)</option>
                </select>
            </div>
            <div class="input-group">
                <label>Formato</label>
                <select id="aspect-select">
                    <option value="1:1">‚¨ú 1:1</option>
                    <option value="16:9">‚ñ≠ 16:9</option>
                    <option value="9:16">‚ñØ 9:16</option>
                    <option value="4:3">üì∫ 4:3</option>
                    <option value="3:4">üì∏ 3:4</option>
                </select>
            </div>
            <div class="input-group">
                <label>Qualidade</label>
                <select id="quality-select">
                    <option value="1K">‚ö° 1K</option>
                    <option value="4K" selected>üåü 4K</option>
                </select>
            </div>
            <button class="btn-generate" id="gen-btn">GERAR IMAGEM</button>
            <div id="status-msg" style="margin-top:20px; color:var(--text-muted); font-size:12px; text-align:center;"></div>
        </div>
        <div class="viewport">
            <div class="settings-icon" id="toggle-settings">‚öôÔ∏è</div>
            <div class="section-title" style="text-align:center; margin-top:0;">Feed de Cria√ß√µes</div>
            <div class="feed-grid" id="feed-grid"></div>
        </div>
    </div>

    <!-- ABA HERO (PROMPT BUILDER) -->
    <div id="hero-tab" class="tab-page">
        <div class="sidebar">
            <div class="section-title">1. Refer√™ncias Persona</div>
            <div class="ref-actions">
                <button class="btn-ref" id="hero-upload-btn">üì§ UPLOAD</button>
                <button class="btn-ref" id="hero-paste-btn">üìã COLAR</button>
                <button class="btn-ref" id="hero-clear-btn">üóëÔ∏è LIMPAR</button>
                <input type="file" id="hero-file-input" style="display:none;" accept="image/*" multiple>
            </div>
            <div class="ref-carousel-container"><div class="ref-carousel" id="hero-ref-carousel"></div></div>

            <div class="section-title">2. Identidade e Profiss√£o</div>
            <div class="effect-group">
                <label class="toggle-wrapper">
                    <span>Profiss√£o</span>
                    <div class="toggle">
                        <input class="toggle-state" type="checkbox" id="hero-profissao-toggle" checked onchange="toggleProfissaoField()">
                        <div class="indicator"></div>
                    </div>
                </label>
                <div id="controls-profissao" class="input-group" style="margin-top: 10px;">
                    <input type="text" id="hero-profissao" placeholder="Ex: Desenvolvedor de Software">
                </div>
            </div>
            <div class="input-group" style="margin-top: 16px;">
                <label>Ambiente</label>
                <input type="text" id="hero-ambiente" placeholder="Ex: Escrit√≥rio minimalista high-tech">
            </div>
            <div class="input-group">
                <label>Roupa</label>
                <input type="text" id="hero-roupa" placeholder="Ex: Terno slim azul marinho">
            </div>

            <div class="effect-group">
                <label class="toggle-wrapper">
                    <span>Descri√ß√£o Extra (Refor√ßo)</span>
                    <div class="toggle">
                        <input class="toggle-state" type="checkbox" id="hero-detalhes-toggle" onchange="toggleDetailsField()">
                        <div class="indicator"></div>
                    </div>
                </label>
                <div id="controls-detalhes" style="display:none; margin-top: 10px;">
                    <textarea id="hero-detalhes-desc" rows="3" placeholder="Ex: Fisiculturista com seios fartos e ombros largos, pele bronzeada..."></textarea>
                </div>
            </div>

            <div class="hero-controls" style="margin-top: 16px;">
                <div class="input-group">
                    <label>Modelo AI</label>
                    <select id="hero-model-select">
                        <option value="gemini-3.1-flash-image-preview" selected>‚ö° Gemini 3.1 Flash</option>
                        <option value="gemini-3-pro-image-preview">üì∏ Gemini 3 Pro (Image)</option>
                    </select>
                </div>
            </div>
            <div class="hero-controls" style="margin-top: 16px;">
                <div class="input-group">
                    <label>G√™nero</label>
                    <select id="hero-genero">
                        <option value="homem">Masculino</option>
                        <option value="mulher">Feminino</option>
                        <option value="andr√≥geno">Andr√≥geno</option>
                    </select>
                </div>
            </div>

            <div class="section-title">3. Estilo e Composi√ß√£o</div>
            <div class="hero-controls">
                <div class="input-group">
                    <label>Estilo Visual</label>
                    <select id="hero-estilo">
                        <option value="executivo moderno">Executivo Moderno</option>
                        <option value="criativo e vibrante">Criativo</option>
                        <option value="t√©cnico e industrial">T√©cnico</option>
                        <option value="minimalista luxuoso">Minimalista</option>
                        <option value="foto editorial moda praia feminina">Moda Praia</option>
                        <option value="√©pico heroico com ilumina√ß√£o dram√°tica">Heroico / √âpico</option>
                        <option value="capa de revista de alta moda (Vogue style)">Capa de Revista</option>
                        <option value="estilo vida fitness e atl√©tico">Vida Fitness</option>
                        <option value="cinematogr√°fico noir em preto e branco">Film Noir</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Preset / Filtro</label>
                    <select id="hero-preset">
                        <option value="cores naturais e realistas" selected>Nenhum (Natural)</option>
                        <option value="ultra-vibrant Huji Cam style, vintage 35mm film, heavy light leaks, chromatic aberration, dated timestamp look, 90s aesthetic">Huji Cam (Vintage)</option>
                        <option value="Kodak Portra 400 aesthetic, warm skin tones, fine film grain, soft highlights">Kodak Portra 400</option>
                        <option value="cinematogr√°fico Teal and Orange, high contrast, blue shadows and orange highlights">Teal & Orange</option>
                        <option value="Polaroid instant film style, faded colors, soft edges, vintage matte finish">Polaroid Retr√¥</option>
                        <option value="moody dark aesthetic, deep shadows, desaturated tones, dramatic low-key lighting">Moody & Dark</option>
                        <option value="Technicolor movie style, hyper-saturated primary colors, retro cinema look">Technicolor Classic</option>
                    </select>
                </div>
            </div>
            <!-- SE√á√ÉO DEDICADA: POSICIONAMENTO -->
            <div class="section-title">4. Pose e Posicionamento</div>
            <div class="pose-box-container" style="background: rgba(255,255,255,0.02); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                <!-- Toggle Mode -->
                <div style="display:flex; justify-content:center; align-items:center; margin-bottom: 15px;">
                    <label class="toggle-wrapper" style="margin-bottom: 0;">
                        <span style="font-size: 10px; font-weight: 800; letter-spacing: 0.5px; color: var(--text-muted);">POSES SALVAS</span>
                        <div class="toggle" style="margin: 0 12px;">
                            <input class="toggle-state" type="checkbox" id="hero-pose-custom-toggle" onchange="togglePoseMode()">
                            <div class="indicator"></div>
                        </div>
                        <span style="font-size: 10px; font-weight: 800; letter-spacing: 0.5px; color: var(--text-muted);">DIGITE POSE</span>
                    </label>
                </div>

                <!-- Bot√£o de A√ß√£o (Ajustado v1.4.2) -->
                <div id="pose-action-btn-container" style="display:flex; gap:10px; margin-bottom: 20px;">
                    <button id="manage-poses-btn" title="Gerenciar Poses" style="flex:1; background:rgba(255,255,255,0.05); border:1px solid var(--border-color); color:white; border-radius:6px; height: 38px; cursor:pointer; font-size:11px; font-weight:bold; transition: all 0.2s;">‚öôÔ∏è EDITAR LISTA / NOVA POSE</button>
                </div>

                <!-- Seletor Visual de Pose (Carrossel) -->
                <div id="hero-pose-carousel-wrapper" class="pose-carousel-wrapper">
                    <button class="carousel-nav prev" id="pose-prev-btn">‚Äπ</button>
                    <div class="pose-carousel-viewport">
                        <div class="pose-carousel-track" id="pose-carousel-track">
                            <!-- Items inseridos via JS -->
                        </div>
                    </div>
                    <button class="carousel-nav next" id="pose-next-btn">‚Ä∫</button>
                </div>

                <div id="hero-pose-custom-container" style="display:none; margin-top: 15px;">
                    <label style="font-size: 10px; font-weight: 800; color: var(--text-muted); margin-bottom: 8px; display: block;">DESCRI√á√ÉO DA POSE ATUAL</label>
                    <textarea id="hero-pose-custom" rows="3" placeholder="Descreva a pose personalizada em detalhes..."></textarea>
                </div>

                <div class="hero-controls" style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 15px;">
                    <div class="input-group">
                        <label>Lado Personagem</label>
                        <select id="hero-lado">
                            <option value="direita">Direita</option><option value="esquerda">Esquerda</option><option value="centro">Centro</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Plano</label>
                        <select id="hero-plano">
                            <option value="meio corpo">Meio Corpo</option><option value="rosto">Close-up Rosto</option><option value="corpo inteiro">Corpo Inteiro</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="section-title">5. Express√£o e √Çngulo</div>
            <div class="hero-controls">
                <div class="input-group">
                    <label>Express√£o</label>
                    <select id="hero-expressao">
                        <option value="neutro" selected>Neutro (Padr√£o)</option>
                        <optgroup label="Positivas">
                            <option value="sorriso aberto e radiante">Sorriso Aberto</option>
                            <option value="sorriso sutil e confiante">Sorriso Sutil</option>
                            <option value="euforia insana e vibrante">Euforia Insana</option>
                            <option value="olhar apaixonado e doce">Apaixonado</option>
                        </optgroup>
                        <optgroup label="S√©rias & Focadas">
                            <option value="olhar s√©rio e autorit√°rio">S√©rio / Autorit√°rio</option>
                            <option value="olhar focado e determinado">Focado / Determinado</option>
                            <option value="express√£o de profundo pensamento">Pensativo</option>
                            <option value="olhar de desprezo e superioridade">Desprezo / Superioridade</option>
                        </optgroup>
                        <optgroup label="Dram√°ticas">
                            <option value="express√£o de surpresa e choque">Surpreso</option>
                            <option value="rosto tenso e mand√≠bula cerrada">Tenso</option>
                            <option value="olhar preocupado e melanc√≥lico">Preocupado</option>
                            <option value="rosto bravo e intimidador">Bravo / Agressivo</option>
                        </optgroup>
                        <optgroup label="Editorial">
                            <option value="olhar magn√©tico para a lente">Olhar Magn√©tico</option>
                            <option value="rosto relaxado com boca levemente entreaberta">Editorial (Vogue Style)</option>
                        </optgroup>
                    </select>
                </div>
            </div>

            <div class="effect-group">
                <label class="toggle-wrapper">
                    <span>√Çngulo de C√¢mera</span>
                    <div class="toggle">
                        <input class="toggle-state" type="checkbox" id="hero-angulo-toggle" onchange="toggleAnguloField()">
                        <div class="indicator"></div>
                    </div>
                </label>
                <div id="controls-angulo" style="display:none; margin-top: 10px;">
                    <select id="hero-angulo">
                        <option value="ao n√≠vel dos olhos">N√≠vel dos Olhos (Eye-level)</option>
                        <option value="de baixo para cima (low angle)">Contra-Plong√©e (Low Angle)</option>
                        <option value="de cima para baixo (high angle)">Plong√©e (High Angle)</option>
                        <option value="extremo low angle (worm's eye view)">Worm's Eye (Vista de Verme)</option>
                        <option value="visto de cima (bird's eye view)">Bird's Eye (Vista de P√°ssaro)</option>
                        <option value="√¢ngulo holand√™s (dutch angle) inclinado">Holand√™s (Inclinado)</option>
                    </select>
                </div>
            </div>

            <div class="section-title">4. Objetos e Acess√≥rios</div>
            <div class="effect-group">
                <label class="toggle-wrapper">
                    <span>Incluir Objeto na Cena</span>
                    <div class="toggle">
                        <input class="toggle-state" type="checkbox" id="hero-objeto-toggle" onchange="toggleObjetoField()">
                        <div class="indicator"></div>
                    </div>
                </label>
                <div id="controls-objeto" style="display:none; margin-top: 15px;">
                    <div class="input-group">
                        <label>Descri√ß√£o do Objeto / A√ß√£o</label>
                        <input type="text" id="hero-objeto-desc" placeholder="Ex: Segurando uma capa de disco de vinil">
                    </div>
                    <div class="ref-actions">
                        <button class="btn-ref" id="obj-upload-btn">üì§ UPLOAD OBJETO</button>
                        <button class="btn-ref" id="obj-clear-btn">üóëÔ∏è LIMPAR</button>
                        <input type="file" id="obj-file-input" style="display:none;" accept="image/*" multiple>
                    </div>
                    <div class="ref-carousel-container" style="margin-top:10px;">
                        <div class="ref-carousel" id="obj-ref-carousel"></div>
                    </div>
                </div>
            </div>

            <div class="section-title">5. Atmosfera e Efeitos</div>
            <div class="hero-effects-list">
                <!-- Backlight -->
                <div class="effect-group">
                    <label class="toggle-wrapper">
                        <span>Backlight</span>
                        <div class="toggle">
                            <input class="toggle-state" type="checkbox" id="hero-backlight" onchange="toggleEffectControls('backlight')">
                            <div class="indicator"></div>
                        </div>
                    </label>
                    <div id="controls-backlight" class="effect-extra-controls" style="display:none;">
                        <input type="color" id="hero-backlight-cor" value="#ffffff" title="Cor do Backlight">
                        <select id="hero-backlight-intensidade">
                            <option value="suave">Suave</option>
                            <option value="m√©dia" selected>M√©dia</option>
                            <option value="forte">Forte</option>
                        </select>
                    </div>
                </div>

                <!-- Lens Flare -->
                <div class="effect-group">
                    <label class="toggle-wrapper">
                        <span>Lens Flare</span>
                        <div class="toggle">
                            <input class="toggle-state" type="checkbox" id="hero-flare" onchange="toggleEffectControls('flare')">
                            <div class="indicator"></div>
                        </div>
                    </label>
                    <div id="controls-flare" class="effect-extra-controls" style="display:none;">
                        <input type="color" id="hero-flare-cor" value="#ffffff" title="Cor do Flare">
                        <select id="hero-flare-estilo">
                            <option value="anam√≥rfico">Anam√≥rfico</option>
                            <option value="circular">Circular</option>
                            <option value="suave">Glow</option>
                        </select>
                    </div>
                </div>

                <!-- Luz Volum√©trica -->
                <div class="effect-group">
                    <label class="toggle-wrapper">
                        <span>Luz Volum√©trica</span>
                        <div class="toggle">
                            <input class="toggle-state" type="checkbox" id="hero-luzv" onchange="toggleEffectControls('luzv')">
                            <div class="indicator"></div>
                        </div>
                    </label>
                    <div id="controls-luzv" class="effect-extra-controls" style="display:none;">
                        <input type="color" id="hero-luzv-cor" value="#ffffff" title="Cor da Luz">
                        <select id="hero-luzv-intensidade">
                            <option value="sutil">Sutil</option>
                            <option value="vis√≠vel" selected>Vis√≠vel</option>
                            <option value="dram√°tica">Dram√°tica</option>
                        </select>
                    </div>
                </div>

                <!-- Part√≠culas -->
                <div class="effect-group">
                    <label class="toggle-wrapper">
                        <span>Part√≠culas</span>
                        <div class="toggle">
                            <input class="toggle-state" type="checkbox" id="hero-part" onchange="toggleEffectControls('part')">
                            <div class="indicator"></div>
                        </div>
                    </label>
                    <div id="controls-part" class="effect-extra-controls" style="display:none;">
                        <select id="hero-part-tipo">
                            <option value="poeira suspensa">Poeira</option>
                            <option value="part√≠culas de luz">F√≥tons</option>
                            <option value="nevoa leve">N√©voa</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="hero-controls">
                <div class="input-group">
                    <label>Formato</label>
                    <select id="hero-aspect-select">
                        <option value="1:1">‚¨ú 1:1 (Quadrado)</option>
                        <option value="16:9" selected>‚ñ≠ 16:9 (Widescreen Horizontal)</option>
                        <option value="9:16">‚ñØ 9:16 (Vertical/Smartphone)</option>
                        <option value="4:3">üì∫ 4:3 (Cl√°ssico Horizontal)</option>
                        <option value="3:4">üì∏ 3:4 (Cl√°ssico Vertical/Retrato)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Qualidade</label>
                    <select id="hero-quality-select">
                        <option value="1K">‚ö° 1K</option>
                        <option value="4K" selected>üåü 4K</option>
                    </select>
                </div>
            </div>

            <button class="btn-generate" id="hero-gen-btn">üöÄ GERAR HERO PRO</button>
        </div>
        <div class="viewport">
            <div class="section-title" style="text-align:center; margin-top:0;">Preview Hero Build</div>
            <div class="feed-grid" id="hero-feed-grid"></div>
            <div id="hero-status-msg" style="margin-top:20px; color:var(--text-muted); font-size:14px; text-align:center;">Configure os par√¢metros e clique em Gerar.</div>
        </div>
    </div>

    <!-- ABA GERA√á√ÉO EM LOTE -->
    <div id="batch-tab" class="tab-page">
        <div class="sidebar">
            <div class="section-title">Gerenciador de Lote</div>
            <div class="input-group">
                <label>Colar JSON de Prompts</label>
                <textarea id="batch-json-input" rows="15" placeholder='[ { "slide": 1, "prompt": "Descri√ß√£o..." }, ... ]'></textarea>
            </div>
            
            <div class="input-group">
                <label>Modelo AI</label>
                <select id="batch-model-select">
                    <option value="gemini-3.1-flash-image-preview" selected>‚ö° Gemini 3.1 Flash</option>
                    <option value="gemini-3-pro-image-preview">üì∏ Gemini 3 Pro (Image)</option>
                </select>
            </div>

            <div class="input-group">
                <label>Formato</label>
                <select id="batch-aspect-select">
                    <option value="1:1">‚¨ú 1:1</option>
                    <option value="16:9" selected>‚ñ≠ 16:9</option>
                    <option value="9:16">‚ñØ 9:16</option>
                    <option value="4:3">üì∫ 4:3</option>
                    <option value="3:4">üì∏ 3:4</option>
                </select>
            </div>

            <button class="btn-generate" id="batch-process-btn">üöÄ INICIAR GERA√á√ÉO EM LOTE</button>
            
            <div id="batch-status-msg" style="margin-top:20px; color:var(--text-muted); font-size:12px; text-align:center;">
                Aguardando lista de prompts...
            </div>
        </div>
        <div class="viewport">
            <div class="section-title" style="text-align:center; margin-top:0;">Fila de Processamento</div>
            <div id="batch-groups-container" style="display:flex; flex-direction:column; gap:30px; padding:20px;">
                <!-- Grupos de gera√ß√£o aparecer√£o aqui -->
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="settings-panel" class="settings-panel">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
            <h2>Ajustes</h2><div class="close-btn" id="close-settings">‚úï</div>
        </div>
        <div class="input-group">
            <label>Chave API (Gemini)</label>
            <input type="password" id="api-key-input" placeholder="Sua chave...">
            <button class="btn-save" id="save-key-btn" style="width:100%;">ATUALIZAR CHAVE</button>
        </div>
        <button class="btn-shutdown" id="shutdown-btn">üõë ENCERRAR EST√öDIO</button>
    </div>

    <div id="preview-modal" class="preview-modal">
        <div class="close-btn" id="close-preview" style="position:absolute; right:30px; top:30px; font-size:30px;">‚úï</div>
        <div class="preview-content">
            <img src="" id="expanded-img">
            <button class="btn-generate" id="modal-download-btn">üì• BAIXAR JPG</button>
        </div>
    </div>

    <div id="save-modal" class="modal">
        <div class="modal-content">
            <h3>Nome do Prompt</h3>
            <input type="text" id="prompt-name-input" placeholder="Ex: Preset Pro">
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button onclick="document.getElementById('save-modal').style.display='none'" style="flex:1; padding:12px; border-radius:8px; border:none; cursor:pointer;">Cancelar</button>
                <button id="confirm-save" style="flex:1; padding:12px; border-radius:8px; border:none; cursor:pointer; background:var(--accent-blue); color:white;">Salvar</button>
            </div>
        </div>
    </div>

    <!-- MODAL GERENCIAR PROMPTS -->
    <div id="manage-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; max-height: 80vh; overflow-y: auto;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h3 style="margin:0;">Gerenciar Prompts</h3>
                <div class="close-btn" onclick="document.getElementById('manage-modal').style.display='none'" style="cursor:pointer; font-size:20px;">‚úï</div>
            </div>
            <div id="manage-prompts-list" style="display:flex; flex-direction:column; gap:10px;">
                <!-- Lista ser√° gerada via JS -->
            </div>
        </div>
    </div>

    <!-- MODAL EDITAR PROMPT ESPEC√çFICO -->
    <div id="edit-prompt-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <h3 id="edit-prompt-title">Editar Prompt</h3>
            <textarea id="edit-prompt-textarea" rows="10" style="width:100%; background:var(--bg-input); color:white; border:1px solid var(--border-color); border-radius:8px; padding:10px; font-family:inherit;"></textarea>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button onclick="document.getElementById('edit-prompt-modal').style.display='none'" style="flex:1; padding:12px; border-radius:8px; border:none; cursor:pointer;">Cancelar</button>
                <button id="confirm-edit-save" style="flex:1; padding:12px; border-radius:8px; border:none; cursor:pointer; background:var(--accent-blue); color:white;">Salvar Altera√ß√£o</button>
            </div>
        </div>
    </div>

    <!-- MODAL SALVAR POSE (v1.4.9) -->
    <div id="save-pose-modal" class="modal" style="z-index: 10001;">
        <div class="modal-content">
            <h3>Adicionar Nova Pose</h3>
            
            <div class="input-group">
                <label>Nome da Pose</label>
                <input type="text" id="pose-name-input" placeholder="Ex: Pose Cl√°ssica">
            </div>

            <div class="input-group">
                <label>Prompt da Pose (Descri√ß√£o para AI)</label>
                <textarea id="pose-prompt-input" rows="4" placeholder="Ex: sentado de forma elegante com pernas cruzadas..."></textarea>
            </div>

            <div class="input-group">
                <label>Miniatura (Thumbnail)</label>
                <input type="file" id="pose-thumb-input" accept="image/*" style="display:none;">
                <button onclick="document.getElementById('pose-thumb-input').click()" class="btn-ref" style="width:100%; height:40px; margin-top:5px;">üì∑ SELECIONAR FOTO</button>
                <div id="pose-thumb-preview" style="margin-top:10px; text-align:center; display:none;">
                    <img src="" style="max-height:100px; border-radius:8px; border:1px solid var(--accent-blue);">
                </div>
            </div>

            <div style="display:flex; gap:10px; margin-top:20px;">
                <button onclick="document.getElementById('save-pose-modal').style.display='none'" style="flex:1; padding:12px; border-radius:8px; border:none; cursor:pointer;">Cancelar</button>
                <button id="confirm-save-pose" style="flex:1; padding:12px; border-radius:8px; border:none; cursor:pointer; background:var(--accent-blue); color:white;">Salvar na Biblioteca</button>
            </div>
        </div>
    </div>

    <!-- MODAL GERENCIAR POSES -->
    <div id="manage-poses-modal" class="modal" style="z-index: 10000;">
        <div class="modal-content" style="max-width: 500px; max-height: 80vh; overflow-y: auto;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h3 style="margin:0;">Gerenciar Poses / Biblioteca</h3>
                <div class="close-btn" onclick="document.getElementById('manage-poses-modal').style.display='none'" style="cursor:pointer; font-size:20px;">‚úï</div>
            </div>
            
            <button id="open-new-pose-modal" style="width:100%; padding:15px; background:var(--accent-blue); color:white; border:none; border-radius:8px; font-weight:bold; cursor:pointer; margin-bottom:20px;">+ ADICIONAR NOVA POSE √Ä BIBLIOTECA</button>

            <div id="manage-poses-list" style="display:flex; flex-direction:column; gap:10px;">
                <!-- Lista ser√° gerada via JS -->
            </div>
        </div>
    </div>

    <!-- MODAL EDITAR POSE ESPEC√çFICA -->
    <div id="edit-pose-modal" class="modal" style="z-index: 10002;">
        <div class="modal-content" style="max-width: 500px;">
            <h3 id="edit-pose-title">Editar Pose da Biblioteca</h3>
            
            <div class="input-group">
                <label>Nome da Pose</label>
                <input type="text" id="edit-pose-name-input" placeholder="Ex: Pose √âpica">
            </div>

            <div class="input-group">
                <label>Descri√ß√£o (Prompt da Pose)</label>
                <textarea id="edit-pose-textarea" rows="6" style="width:100%; background:var(--bg-input); color:white; border:1px solid var(--border-color); border-radius:8px; padding:10px; font-family:inherit;"></textarea>
            </div>

            <div class="input-group">
                <label>Nova Miniatura (Opcional)</label>
                <input type="file" id="edit-pose-thumb-input" accept="image/*" style="display:none;">
                <button onclick="document.getElementById('edit-pose-thumb-input').click()" class="btn-ref" style="width:100%; height:40px; margin-top:5px;">üì∑ ALTERAR FOTO</button>
                <div id="edit-pose-thumb-preview" style="margin-top:10px; text-align:center; display:none;">
                    <img src="" style="max-height:100px; border-radius:8px; border:1px solid var(--accent-blue);">
                </div>
            </div>

            <div style="display:flex; gap:10px; margin-top:20px;">
                <button onclick="document.getElementById('edit-pose-modal').style.display='none'" style="flex:1; padding:12px; border-radius:8px; border:none; cursor:pointer;">Cancelar</button>
                <button id="confirm-edit-pose-save" style="flex:1; padding:12px; border-radius:8px; border:none; cursor:pointer; background:var(--accent-blue); color:white;">Salvar Altera√ß√£o</button>
            </div>
        </div>
    </div>

    <div id="ref-modal" class="preview-modal">
        <div class="close-btn" id="close-ref-modal" style="position:absolute; right:30px; top:30px; font-size:30px;">‚úï</div>
        <div class="preview-content">
            <h3 style="margin-bottom:15px;">Gerenciar Refer√™ncia</h3>
            <img src="" id="ref-expanded-img" style="max-height: 60vh;">
            <div style="display:flex; gap:15px; margin-top:20px; width:100%;">
                <button class="btn-ref" id="ref-replace-btn" style="background:var(--accent-blue); color:white; font-size:14px;">üîÑ SUBSTITUIR</button>
                <button class="btn-ref" id="ref-delete-btn" style="background:var(--danger-red); color:white; border:none; font-size:14px;">üóëÔ∏è EXCLUIR</button>
            </div>
        </div>
    </div>

    <script type="module" src="script.js"></script>
    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab-page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(b => b.classList.remove('active'));
            
            const selectedPage = document.getElementById(`${tab}-tab`);
            const selectedBtn = document.getElementById(`tab-${tab}-btn`);
            
            if(selectedPage) selectedPage.classList.add('active');
            if(selectedBtn) selectedBtn.classList.add('active');
        }
    </script>
</body>
</html>  
 
 